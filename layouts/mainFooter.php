        <!-- Footer -->
            <footer class="content-footer footer bg-footer-theme">
              <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
                <div class="mb-2 mb-md-0">
                  ©
                  <script>
                    document.write(new Date().getFullYear());
                  </script>
                  , made with ❤️ 
                  <a href="" class="footer-link fw-medium"></a>
                </div>
                <div class="d-none d-lg-inline-block">
                  <a href="" class="footer-link me-4">License</a>

                  <a
                    href=""
                    class="footer-link me-4"
                    >Documentation</a
                  >

                  <a
                    href=""
                    class="footer-link"
                    >Support</a
                  >
                </div>
              </div>
            </footer>
            <!-- / Footer -->

            <div class="content-backdrop fade"></div>
          </div>
          <!-- Content wrapper -->
        </div>
        <!-- / Layout page -->
      </div>

<style>
   .support[_ngcontent-vwv-c229] {
      background: #fff;
      width: 100%;
      padding: 0 10px;
      text-align: left
   }

   .support-head[_ngcontent-vwv-c229] {
      background: #db0004;
      text-align: left;
      color: #fff;
      padding: 15px;
      font-size: 17px;
      border-top-right-radius: 9px;
      border-top-left-radius: 9px;
      font-weight: 600
   }

   .support[_ngcontent-vwv-c229] p[_ngcontent-vwv-c229] {
      font-size: 14px;
      padding: 0 8px;
      margin-bottom: 10px
   }

   .support-txt[_ngcontent-vwv-c229] {
      text-align: right;
      margin-top: 10px;
      border-bottom: 1px solid #ccc
   }

   .s-txt[_ngcontent-vwv-c229] {
      font-weight: 700;
      font-size: 17px !important;
      margin-bottom: 0 !important
   }

   .faq-btn[_ngcontent-vwv-c229] a[_ngcontent-vwv-c229] {
      background: #0300bf;
      padding: 10px;
      text-align: center;
      color: #fff;
      font-size: 18px;
      display: block;
      border-bottom-right-radius: 9px;
      border-bottom-left-radius: 9px;
      
   }

   .support-head[_ngcontent-vwv-c229] img[_ngcontent-vwv-c229] {
      height: 30px
   }

   .faq-btn[_ngcontent-vwv-c229] img[_ngcontent-vwv-c229] {
      height: 35px
   }

   .support[_ngcontent-vwv-c229] img[_ngcontent-vwv-c229] {
      width: 40px;
      height: 40px
   }
   .kavya-modal-content {
        border-radius: 10px; /* Rounded corners */
    }
    .buy-kavya .btn-kavya-now {
            position: fixed;
            bottom: 3rem;
            right: 1.625rem;
            z-index: 1080;
        }
        .modal-backdrop {
    background-color: transparent !important; /* Remove background fade */
}

.kavya-modal-content {
    background-color: white; /* Set modal content background color */
}

.buy-kavya {
    position: absolute;
    top: 20px; /* Adjust as needed */
    right: 20px; /* Adjust as needed */
}


</style>
<style>
   section[_ngcontent-oqc-c230] {
      position: fixed;
      right: 0;
      top: 40vh;
      z-index: 1000
   }

   .support-me[_ngcontent-oqc-c230] {
      position: fixed;
      top: 30%;
      right: -181px;
      transition: all .3s ease-in-out 0s;
      height: 70px;
      z-index: 9;
      box-shadow: 0 3px 1px -2px #00000024, 0 2px 2px #0000001a, 0 1px 5px #00000014
   }

   .support-me[_ngcontent-oqc-c230] button[_ngcontent-oqc-c230] {
      border-radius: 4px;
      background: #283897;
      height: 70px;
      border: none;
      cursor: pointer;
      padding: 0
   }

   .support-me[_ngcontent-oqc-c230] button[_ngcontent-oqc-c230] em.callback-icon[_ngcontent-oqc-c230] {
      background: url(../assets/img/icons/unicons/support-icon.c7e4ffa726a55d2f45aa.png) no-repeat scroll 8px 14px;
      border-right: 1px solid #f3ebeb;
      box-shadow: 1px 0 red;
      float: left;
      height: 69px;
      width: 55px;
      font-size: 18px;
      transition: all ease .6s;
      -moz-transition: all ease .6s;
      -webkit-transition: all ease .6s;
      -o-transition: all ease .6s
   }

   .support-me[_ngcontent-oqc-c230] button[_ngcontent-oqc-c230]>span[_ngcontent-oqc-c230] {
      float: left;
      width: 180px;
      color: #fff;
      font-size: 12px;
      font-weight: 300;
      letter-spacing: .5px;
      line-height: 20px;
      padding-top: .3em;
      padding-bottom: 5px
   }

   .support-me[_ngcontent-oqc-c230] .now[_ngcontent-oqc-c230] {
      font-size: 18px;
      display: block;
      font-weight: 500
   }

   .support-me[_ngcontent-oqc-c230]:hover,
   .support-me.call-me[_ngcontent-oqc-c230]:hover {
      right: 0
   }

   .support-me[_ngcontent-oqc-c230] button[_ngcontent-oqc-c230]:hover,
   .support-me[_ngcontent-oqc-c230] button[_ngcontent-oqc-c230]:focus {
      outline: none
   }

   .support-me.call-me[_ngcontent-oqc-c230] {
      margin-top: 90px;
      right: -221px
   }

   .support-me.call-me[_ngcontent-oqc-c230] button[_ngcontent-oqc-c230] .call1[_ngcontent-oqc-c230] {
      font-size: 12px
   }

   .support-me.call-me[_ngcontent-oqc-c230] button[_ngcontent-oqc-c230]>span[_ngcontent-oqc-c230] {
      background: #283897;
      width: 200px
   }

   .support-me.call-me[_ngcontent-oqc-c230] button[_ngcontent-oqc-c230] em.callback-icon[_ngcontent-oqc-c230] {
      background: url(ph-icon.1b9f86d95b08b60b02db.png) no-repeat scroll 8px 14px
   }

   .sideHelpBolx[_ngcontent-oqc-c230] {
      position: fixed;
      top: calc(34% + 70px);
      right: -201px;
      display: flex;
      transition: right .3s ease-in-out;
      -moz-transition: right .3s ease-in-out;
      -webkit-transition: right .3s ease-in-out;
      -o-transition: right .3s ease-in-out
   }

   .sideHelpBolx[_ngcontent-oqc-c230]:hover {
      right: 0px;
      transition: right .3s ease-in-out;
      -moz-transition: right .3s ease-in-out;
      -webkit-transition: right .3s ease-in-out;
      -o-transition: right .3s ease-in-out
   }

   .sideHelpBolx[_ngcontent-oqc-c230]>div[_ngcontent-oqc-c230]:nth-child(1) {
      background-color: #283897;
      width: 55px;
      height: 55px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: #fff;
      font-size: 27px;
      border-radius: 5px 0 0 5px
   }

   .sideHelpBolx[_ngcontent-oqc-c230]>div[_ngcontent-oqc-c230]:nth-child(2) {
      background-color: #283897;
      border-radius: 0 5px 5px 0;
      margin-left: 1px;
      width: 200px;
      height: 0;
      transition: height 1s ease-in-out;
      -moz-transition: height 1s ease-in-out;
      -webkit-transition: height 1s ease-in-out;
      -o-transition: height 1s ease-in-out
   }

   .sideHelpBolx[_ngcontent-oqc-c230]:hover>div[_ngcontent-oqc-c230]:nth-child(2) {
      height: 313px;
      transition: height .1s ease-in-out;
      -moz-transition: height .1s ease-in-out;
      -webkit-transition: height .1s ease-in-out;
      -o-transition: height .1s ease-in-out
   }

   .sideHelpBolx[_ngcontent-oqc-c230]>div[_ngcontent-oqc-c230]:nth-child(2)>div[_ngcontent-oqc-c230] {
      padding: 10px 15px;
      color: #fff;
      font-size: 12px;
      font-weight: 300;
      letter-spacing: .5px
   }

   .sideHelpBolx[_ngcontent-oqc-c230]>div[_ngcontent-oqc-c230]:nth-child(2)>div[_ngcontent-oqc-c230] .now[_ngcontent-oqc-c230] {
      font-size: 18px;
      font-weight: 500
   }

   .support-me[_ngcontent-oqc-c230] .timing[_ngcontent-oqc-c230] {
      font-size: 10px
   }

.chat-box {
    max-height: 300px;
    overflow-y: auto;
    padding: 10px;
}

.user-input-container {
    display: flex;
}

.user-input {
    width: calc(100% - 80px);
    padding: 8px;
    border: 1px solid #ccc;
    border-radius: 4px 0 0 4px;
    margin-bottom: 10px;
    box-sizing: border-box;
}

.send-btn {
    width: 70px;
    padding: 8px;
    border: none;
    background-color: #4CAF50;
    color: white;
    border-radius: 0 4px 4px 0;
    cursor: pointer;
}

.user-msg-container {
    display: flex;
    justify-content: flex-end;
    margin-bottom: 10px;
}

.user-msg {
    background-color: #4CAF50;
    color: white;
    padding: 10px;
    border-radius: 8px 8px 0 8px;
    margin-left: 10px;
}

.user-icon {
    width: 30px;
    height: 30px;
    margin-left: 5px;
    align-self: flex-end;
}

.bot-msg-container {
    display: flex;
    margin-bottom: 10px;
}

.bot-msg {
    background-color: #f2f2f2;
    color: #333;
    padding: 10px;
    border-radius: 8px 8px 8px 0;
    margin-right: 10px;
}

.bot-icon {
    width: 30px;
    height: 30px;
    margin-right: 5px;
    align-self: flex-end;
}

</style>
<div _ngcontent-vwv-c229="" class="modal animate__animated animate__bounceInUp" id="animationModal">
        <div class="modal-dialog modal-sm modal-dialog-centered" role="document" style="margin-right: 10px; width: 350px">
          <div class="modal-content kavya-modal-content">
            <div class="form-body">
                  <div _ngcontent-vwv-c229="" class="support-head"><img _ngcontent-vwv-c229="" src="../assets/img/icons/unicons/support.png"> Customer Helpline</div>
                  <div>
            <div class="chat-box" id="chat-box"></div>
            
        </div>
                  <div _ngcontent-vwv-c229="" class="faq-btn"><a _ngcontent-vwv-c229="" href="#"><div class="user-input-container">
                      
                      <div class="input-group input-group-merge">
                        <input type="text" id="user-input" class="form-control" placeholder="············" aria-describedby="multicol-confirm-password2">
                        <span class="input-group-text cursor-pointer" id="multicol-confirm-password2" onclick="sendMessage()"><i class="bx bx-send"></i></span>
                      </div>
                      
            </div></a></div>
               </div>
          </div>
        </div>
      </div>



<!--<div class="buy-kavya">
    <button type="button" class="btn btn-icon btn-xl rounded-pill btn-google-plus btn-kavya-now" id="supportButton" data-bs-toggle="modal" data-bs-target="#animationModal">
        <i class="tf-icons bx bx-support" style="font-size: 40px;"></i>
    </button>
</div>-->


<section _ngcontent-oqc-c230="">
   <div _ngcontent-oqc-c230="" class="support-me"><button _ngcontent-oqc-c230="" type="button" id="callMeBackLink"><em _ngcontent-oqc-c230="" class="callback-icon"></em><span _ngcontent-oqc-c230="">Want us to call you? <div _ngcontent-oqc-c230="" class="now">Call me back <br _ngcontent-oqc-c230=""><span _ngcontent-oqc-c230="" class="timing">(10 AM to 7 PM)</span></div></span></button></div>
   <div _ngcontent-oqc-c230="" class="sideHelpBolx">
      <div _ngcontent-oqc-c230=""><i _ngcontent-oqc-c230="" class="fas fa-phone-alt"></i></div>
      <div _ngcontent-oqc-c230="">
         <div _ngcontent-oqc-c230=""><span _ngcontent-oqc-c230="" class="d-block mb-3 text-center"> Have any query? Call <br _ngcontent-oqc-c230=""> us or write to us </span><span _ngcontent-oqc-c230="">
               <div _ngcontent-oqc-c230="" class="now"><?php
                $phoneNumber = preg_replace("/[^0-9]/", "", getPortalInfo('mob1'));
                if (strlen($phoneNumber) == 10) {
                    $formattedPhoneNumber = substr($phoneNumber, 0, 3) . ' ' . substr($phoneNumber, 3, 3) . ' ' . substr($phoneNumber, 6);
                    echo $formattedPhoneNumber;
                } ?></div>
               <div _ngcontent-oqc-c230="" class="now"><?php
                $phoneNumber = preg_replace("/[^0-9]/", "", getPortalInfo('mob2'));
                if (strlen($phoneNumber) == 10) {
                    $formattedPhoneNumber = substr($phoneNumber, 0, 3) . ' ' . substr($phoneNumber, 3, 3) . ' ' . substr($phoneNumber, 6);
                    echo $formattedPhoneNumber;
                } ?></div>
               <div _ngcontent-oqc-c230="" class="now"><?php
                $phoneNumber = preg_replace("/[^0-9]/", "", getPortalInfo('mob3'));
                if (strlen($phoneNumber) == 10) {
                    $formattedPhoneNumber = substr($phoneNumber, 0, 3) . ' ' . substr($phoneNumber, 3, 3) . ' ' . substr($phoneNumber, 6);
                    echo $formattedPhoneNumber;
                } ?></div>
                <?= strtolower(getPortalInfo('webEmail')); ?>
 <span _ngcontent-oqc-c230="" class="d-block mt-3"> For Product and Services related <div _ngcontent-oqc-c230="" class="now">8877332212</div> cd@sprintpan.in </span>
            </span></div>
      </div>
   </div>
</section>
    </div>


      <!-- Overlay -->
      <div class="layout-overlay layout-menu-toggle"></div>
    </div>
    <!-- / Layout wrapper -->
    <!-- Core JS -->
    <!-- build:js assets/vendor/js/core.js -->
    <script src="../assets/vendor/libs/jquery/jquery.js"></script>
    <script src="../assets/vendor/libs/popper/popper.js"></script>
    <script src="../assets/vendor/js/bootstrap.js"></script>
    <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
    <script src="../assets/vendor/js/menu.js"></script>
    <script src="../assets/vendor/libs/typeahead-js/typeahead.js"></script>
    
    
    <script src="../assets/vendor/libs/datatables-bs5/datatables-bootstrap5.js"></script>
    <script src="../assets/vendor/libs/datatables-bs5/jquery.dataTables.min.js"></script>
    <script src="../assets/vendor/libs/datatables-bs5/dataTables.bootstrap5.min.js"></script>
    
    <script src="../assets/js/extended-ui-blockui.js"></script>
    <script src="../assets/vendor/libs/block-ui/block-ui.js"></script>

    <script src="../assets/js/forms-pickers.js"></script>
    <script src="../assets/js/cards-actions.js"></script>

    <!-- endbuild -->
    <script src="../assets/vendor/libs/flatpickr/flatpickr.js"></script>
    <script src="../assets/vendor/libs/@form-validation/umd/bundle/popular.min.js"></script>
    <script src="../assets/vendor/libs/@form-validation/umd/plugin-bootstrap5/index.min.js"></script>
    <script src="../assets/vendor/libs/@form-validation/umd/plugin-auto-focus/index.min.js"></script>
    <!-- Vendors JS -->

    <!-- Main JS -->
    <script src="../assets/js/mainn.js"></script>
    <script src="../assets/vendor/libs/moment/moment.js"></script>
    <!-- Page JS -->

    <!-- Place this tag in your head or just before your close body tag. -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    
    <!--============================================================= -->
    <script>

$(document).ready(function() {
    
    // Variable for option message
    var optionMessage = "Please select an option:<br>";
    optionMessage += "1. Transaction Status<br>";
    optionMessage += "2. Pan Card Status<br>";
    optionMessage += "3. Recharge Rechage Status<br>";
    optionMessage += "4. Email Update<br>";
    optionMessage += "5. Recharge Status<br>";
    optionMessage += "6. Query<br>";
    
    // Function to send a message
    function sendMessage(message) {
        $('#chat-box').append('<div class="user-msg-container"><div class="user-msg">' + message + '</div><img src="../assets/img/icons/unicons/bot-user.svg" class="user-icon"></div>');

        $.ajax({
            type: 'POST',
            url: 'process_message.php', // Update the URL to your PHP endpoint
            data: { message: message },
            success: function(response) {
                if (response.trim() !== '') { // Ensure the response is not empty or undefined
                    $('#chat-box').append('<div class="bot-msg-container"><img src="../assets/img/icons/unicons/chatbot-icon.webp" class="bot-icon"><div class="bot-msg">' + response + '</div></div>');
                    $(".chat-box").animate({ scrollTop: $(".chat-box")[0].scrollHeight }, "fast");
                }
            }
        });
    }

    // Function to send a welcome message when the chatbox is opened
    function sendWelcomeMessage() {
        var welcomeMessage = "Hello! I'm your virtual assistant. How can I help you today?";
        $('#chat-box').append('<div class="bot-msg-container"><img src="../assets/img/icons/unicons/chatbot-icon.webp" class="bot-icon"><div class="bot-msg">' + welcomeMessage + '</div></div>');
        $('#chat-box').append('<div class="bot-msg-container"><img src="../assets/img/icons/unicons/chatbot-icon.webp" class="bot-icon"><div class="bot-msg">' + optionMessage + '</div></div>');
        $(".chat-box").animate({ scrollTop: $(".chat-box")[0].scrollHeight }, "fast");
    }

    // Load chat history from localStorage
    function loadChatHistory() {
        var chatHistory = localStorage.getItem('chat_history');
        if (chatHistory) {
            $('#chat-box').html(chatHistory);
        }
    }

    // Save chat history to localStorage
    function saveChatHistory() {
        var chatHistory = $('#chat-box').html();
        localStorage.setItem('chat_history', chatHistory);
    }

    // Check if session exists
    var sessionExists = sessionStorage.getItem('chat_session');
    if (!sessionExists) {
        sendWelcomeMessage();
        sessionStorage.setItem('chat_session', true); // Set session flag
        sessionStorage.setItem('session_start_time', Date.now()); // Store session start time
    } else {
        // Check if the user returns after a certain time frame
        var sessionStartTime = parseInt(sessionStorage.getItem('session_start_time'));
        var currentTime = Date.now();
        var sessionDuration = currentTime - sessionStartTime;
        var timeThreshold = 5 * 60 * 1000; // 5 minutes threshold
        
        if (sessionDuration >= timeThreshold) {
            // Notify the user if they return after a certain period
            var elapsedTimeMinutes = Math.floor(sessionDuration / (1000 * 60));
            sendMessage("Welcome back! You were away for " + elapsedTimeMinutes + " minutes.");
        }
    }

    // Load chat history on page load
    loadChatHistory();

    // Call the function to send the welcome message when the page loads
    //sendWelcomeMessage(); // Commented out to prevent the welcome message from being sent again

    // Event listener for sending user messages
    $('#multicol-confirm-password2').on('click', function() {
        var userInput = $('#user-input').val().trim(); // Ensure to trim the user input
        if (userInput !== '') { // Check if the user input is not empty
            sendMessage(userInput);
            $('#user-input').val('');
            saveChatHistory(); // Save chat history after sending user message
        }
    });
});
</script>





<script>
    $(document).ready(function() {
        $('#callMeBackLink').click(function(e) {
            e.preventDefault();
            // Show alert
            toastr.success('Your request has been received. Our team will contact you shortly.');
            // Send WhatsApp message
            sendWhatsApp(<?= getPortalInfo('supportMob') ?>, 'New callback request received from a <?= getUsersInfo('owner_name')?>. Please contact them at your earliest convenience.', 'callback');
        });

        // Function to send WhatsApp message
        function sendWhatsApp(mob, message, callback) {
            // Make an AJAX request to a PHP endpoint to send WhatsApp message
            $.ajax({
                url: '../system/send_exmp_message.php', // Replace with your PHP endpoint
                method: 'POST',
                data: {mob: mob, message: message, callback: callback},
                success: function(response) {
                    console.log(response); // Log the response from the server
                },
                error: function(xhr, status, error) {
                    console.error(xhr.responseText); // Log any errors
                }
            });
        }
    });
</script>

    <script>
    document.addEventListener('DOMContentLoaded', function() {
        var supportButton = document.getElementById('supportButton');
        var supportIcon = supportButton.querySelector('i');

        // Event listener for button click
        supportButton.addEventListener('click', function() {
            var isOpen = supportButton.getAttribute('aria-expanded') === 'true';
            if (isOpen) {
                // Close the modal programmatically
                var animationModal = document.getElementById('animationModal');
                var modal = new bootstrap.Modal(animationModal);
                modal.hide();
            } else {
                // Change icon to close (x)
                supportIcon.classList.remove('bx-support');
                supportIcon.classList.add('bx-x');
            }
        });

        // Event listener for modal close event
        var animationModal = document.getElementById('animationModal');
        animationModal.addEventListener('hidden.bs.modal', function () {
            // Change icon to support when modal is closed
            supportIcon.classList.remove('bx-x');
            supportIcon.classList.add('bx-support');
        });
    });
</script>


<script>
    document.addEventListener("DOMContentLoaded", function () {
        // Call the function to set the active state on page load
        setInitialActiveState();
    });

    function activateMenuItem(link) {
        // Remove 'active' class from all menu items
        var menuItems = document.querySelectorAll('.menu-item');
        menuItems.forEach(function (item) {
            item.classList.remove('active');
            item.classList.remove('active', 'open');
        });

        // Add 'active' class to the clicked menu item
        link.closest('.menu-item').classList.add('active');
        // Add 'active open' class to the parent menu item if it has a submenu
        var parentMenuItem = link.closest('.menu-item').parentNode.closest('.menu-item');
        if (parentMenuItem) {
            parentMenuItem.classList.add('active', 'open');
        }
    }

    function setInitialActiveState() {
        var currentPageUrl = window.location.href;

        // Check each menu item's href and set 'active' class if the URL matches
        var menuLinks = document.querySelectorAll('.menu-link');
        menuLinks.forEach(function (link) {
            if (currentPageUrl.includes(link.getAttribute('href'))) {
                link.closest('.menu-item').classList.add('active');
                // Add 'active open' class to the parent menu item if it has a submenu
                var parentMenuItem = link.closest('.menu-item').parentNode.closest('.menu-item');
                if (parentMenuItem) {
                    parentMenuItem.classList.add('active', 'open');
                }
            }
        });
    }
    
$(document).ready(function () {
    $('#generateQR').click(function () {
        // Get the orderId value
        var orderId = $('#orderId').val();

        // Define a function to check the status
        function checkStatus() {
            $.ajax({
                url: '../system/paytm_response.php',
                type: 'GET',
                data: { ORDERID: orderId },
                dataType: 'json',
                success: function (response) {
                    console.log('Response:', response); // Log the entire response

                    // Update the image and close the modal based on the correct property
                    if (response.STATUS === 'TXN_SUCCESS' || response.status === 'TXN_SUCCESS') {
                        $('#qrCodeImage')
                            .attr('src', '../assets/img/success_done.svg')
                            .attr('width', '180')
                            .attr('height', '180')
                            .attr('style', 'margin-top: 20px');

                        // Delay modal hiding by 10 seconds
                        setTimeout(function () {
                            $('#qrModal').modal('hide');

                            // Redirect to success.php with parameters
                            var txnId = response.ORDERID;
                            var amount = response.TXNAMOUNT;
                            var ref = response.BANKTXNID;
                            var dateTime = response.TXNDATE;

                           var newUrl = window.location.href + '?txnId=' + txnId + '&amount=' + amount + '&utr=' + ref + '&dateTime=' + dateTime;

                            // Update the URL
                            window.location.href = newUrl;
                        }, 5000);

                        // Stop the interval once the success condition is met
                        clearInterval(intervalId);
                    } else {
                        console.log('Transaction not successful. Status: ' + response.STATUS);
                    }
                },
                error: function (error) {
                    console.log('AJAX Error: ' + error);
                }
            });
        }

        // Call the checkStatus function every 3 seconds
        var intervalId = setInterval(checkStatus, 3000);
    });
    
});
$(document).ready(function () {
    $('#generateQR').click(function () {
        // Validate the input to allow only digits
        var amountInput = $('#amount');
        var amount = amountInput.val();

        if (!/^\d+$/.test(amount)) {
            toastr.error('Error: Please enter a valid numeric amount.');
            return; // Stop further execution
        }

        // Check if the amount is less than 500
        if (parseInt(amount) < 1) {
            toastr.error('Error: Amount should be at least Rs 500.');
            return; // Stop further execution
        }

        // Rest of your code for form submission using AJAX
        var orderId = $('#orderId').val();
        var Id = $('#Id').val();

        sessionStorage.setItem('orderId', orderId);
        sessionStorage.setItem('Id', Id);

        // Serialize the form data
        var formData = $('#addWallet').serialize();

        $.ajax({
            url: 'generate_qr.php',
            type: 'post',
            data: formData,
            dataType: 'json', // Expect JSON response
            success: function (response) {
                if (response.status === 'success') {
                    $('#qrCodeImage').attr('src', '../assets/img/loading.svg');
                    $('#qrModal').modal('show');
                    setTimeout(function () {
                        $('#qrCodeImage').attr('src', response.qrImage);
                        
                    }, 3000);
                } else {
                    Ps_alert(response.message, 'error');
                    //console.log('Error:', response.message);
                    sessionStorage.removeItem('orderId');
                }
            },
            error: function (error) {
                //console.log('AJAX Error:', error);
                Ps_alert('Error: Unable to generate QR code.', 'error');
                sessionStorage.removeItem('orderId');
            }
        });
    });
});

document.addEventListener('DOMContentLoaded', function () {
    var qrModal = new bootstrap.Modal(document.getElementById('qrModal'));
    var upiTimerElement = document.getElementById('upitimer');
    var expirationTime = 5 * 60; // 5 minutes in seconds

    // Function to update the timer
    function updateTimerDisplay() {
        var minutes = Math.floor(expirationTime / 60);
        var seconds = expirationTime % 60;

        // Format the time as MM:SS
        var formattedTime = minutes + ':' + (seconds < 10 ? '0' : '') + seconds;
        
        // Update the timer display
        upiTimerElement.textContent = formattedTime;
    }

    // Function to start the countdown
    function startCountdown() {
        updateTimerDisplay();

        // Update the timer every second
        var countdownInterval = setInterval(function () {
            expirationTime--;

            // Check if the time has expired
            if (expirationTime <= 0) {
                clearInterval(countdownInterval);
                qrModal.hide(); // Close the modal when the timer expires
            } else {
                updateTimerDisplay();
            }
        }, 1000);
    }

    // Event listener for modal opening
    qrModal._element.addEventListener('shown.bs.modal', function () {
        expirationTime = 5 * 60; // Reset the expiration time when the modal is opened
        startCountdown();
    });

    // Event listener for modal closing
    qrModal._element.addEventListener('hidden.bs.modal', function () {
        clearInterval(countdownInterval); // Clear the interval when the modal is closed
    });
});


// Define a function to unset the session variable
document.addEventListener('DOMContentLoaded', function() {
function cancelPayment() {
    // Trigger an AJAX request to unset the session variable with a flag
    $.ajax({
        url: '../system/paytm_response.php?cancelepaymet', // Pass the flag in the URL
        type: 'GET',
        success: function (response) {
            // Handle success if needed
            toastr.error('Payment Cancelled Your payment has been canceled. If you have any questions, please contact our support team.');
            //console.log(response);
            $('#qrModal').modal('hide');
            setTimeout(function () {
                location.reload();
            }, 4000); // 4000 milliseconds = 4 seconds
        },
        error: function (error) {
            // Handle error if needed
            console.error(error);
        }
    });
}
});

document.getElementById('cancelButton').addEventListener('click', function () {
    $('#qrModal').modal('hide');
    swal.fire({
        title: 'Are you sure?',
        text: 'You are about to cancel the payment. Are you sure you want to proceed?',
        icon: 'warning',
        showCancelButton: true,
        confirmButtonColor: '#3085d6',
        cancelButtonColor: '#d33',
        confirmButtonText: 'Yes, cancel it!'
    }).then((result) => {
        if (result.isConfirmed) {
            // User clicked "Yes, cancel it!" button
            swal.fire('Cancelled', 'Your payment has been canceled.', 'success');
            cancelPayment();
        } else {
            // User clicked "Cancel" button or closed the modal
            swal.fire('Cancelled', 'Your payment is still processing.', 'info');
            // Perform additional actions here if needed
        }
    });
});

</script>


<script>
    function confirmLogout() {
        // Use SweetAlert or any other confirmation method
        Swal.fire({
            title: 'Logout Confirmation',
            text: 'Are you sure you want to log out?',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Yes, log out!'
        }).then((result) => {
            if (result.isConfirmed) {
                // Proceed with the logout action
                window.location.href = "../logout.php";
            }
        });
    }
window.addEventListener('load', () => {
    const loaderWrapper = document.querySelector('.loader-wrapper');
    loaderWrapper.style.display = 'none';
});
$(document).ready(function() {
    var table = $('#example').DataTable({
        searching: false, // Hide the search box
        lengthChange: false, // Hide the "Show [X] entries" dropdown
    });
});

</script>


  </body>
</html>
